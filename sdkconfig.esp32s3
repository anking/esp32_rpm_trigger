# 
# ESP32-S3 Configuration with BLE Enabled
#
CONFIG_IDF_TARGET_ESP32S3=y
CONFIG_IDF_TARGET="esp32s3"
CONFIG_IDF_FIRMWARE_CHIP_ID=0x0009

# BLE Configuration
CONFIG_BT_ENABLED=y
CONFIG_BT_CONTROLLER_ENABLED=y
CONFIG_BT_BLUEDROID_ENABLED=y
CONFIG_BT_BLE_ENABLED=y
CONFIG_BT_CLASSIC_ENABLED=n
CONFIG_BT_CONTROLLER_MODE_BLE_ONLY=y
CONFIG_BT_CONTROLLER_BLE_MAX_CONN=9
CONFIG_BT_CONTROLLER_BLE_MAX_CONN_EFF=1
CONFIG_BT_BLE_ADV_REPORT_DISCARD_THRSHOLD=20
CONFIG_BT_BLE_ADV_REPORT_FLOW_CTRL_SUPP=y
CONFIG_BT_BLE_ADV_REPORT_FLOW_CTRL_NUM=100
CONFIG_BT_BLE_SCAN_DUPL=y
CONFIG_BT_BLE_MESH_SCAN_DUPL_EN=y
CONFIG_BT_BLE_MESH_SCAN_DUPL_CACHE_REFRESH_PERIOD=30

# GATT Configuration
CONFIG_BT_GATTC_ENABLE=y
CONFIG_BT_GATTS_ENABLE=y
CONFIG_BT_GATTS_PPCP_CHAR_GAP=y
CONFIG_BT_GATTC_NOTIF_REG_MAX=64
CONFIG_BT_GATTC_CACHE_NVS_FLASH=y
CONFIG_BT_GATTS_ROBUST_CACHING_ENABLED=y

# Bluetooth Controller Configuration  
CONFIG_BT_CONTROLLER_ONLY=n
CONFIG_BT_CONTROLLER_RUN_CPU=0
CONFIG_BT_CONTROLLER_RUN_CPU_1=y
CONFIG_BT_CONTROLLER_MAIN_XTAL_PU_DURING_LIGHT_SLEEP=n

# Memory Configuration
CONFIG_BT_CONTROLLER_MEM_RELEASE=n
CONFIG_BT_RESERVE_DRAM=0x10000

# NimBLE disabled (using Bluedroid)
CONFIG_BT_NIMBLE_ENABLED=n

# Flash and Memory
CONFIG_ESPTOOLPY_FLASHMODE_QIO=y
CONFIG_ESPTOOLPY_FLASHFREQ_80M=y
CONFIG_ESPTOOLPY_FLASHSIZE_8MB=y
CONFIG_PARTITION_TABLE_SINGLE_APP=y

# ESP32-S3 Specific
CONFIG_ESP32S3_DEFAULT_CPU_FREQ_240=y
CONFIG_ESP32S3_DEFAULT_CPU_FREQ_MHZ=240
CONFIG_ESP32S3_SPIRAM_SUPPORT=n

# Logging
CONFIG_LOG_DEFAULT_LEVEL_INFO=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_TIMESTAMP_SOURCE_RTOS=y

# Task Watchdog
CONFIG_ESP_TASK_WDT=y
CONFIG_ESP_TASK_WDT_TIMEOUT_S=5
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU0=y
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU1=y

# FreeRTOS
CONFIG_FREERTOS_HZ=1000
CONFIG_FREERTOS_TIMER_TASK_PRIORITY=1
CONFIG_FREERTOS_TIMER_TASK_STACK_DEPTH=2048

# NVS
CONFIG_NVS_ENCRYPTION=n

# WiFi disabled to save memory  
CONFIG_ESP_WIFI_ENABLED=n 